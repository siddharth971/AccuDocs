<div
  class="flex flex-col bg-white dark:bg-[#1e293b] border border-slate-200 dark:border-slate-700/50 rounded-3xl overflow-hidden animate-page-enter"
  style="height: calc(100vh - 176px); box-shadow: 0 4px 24px -4px rgba(15, 23, 42, 0.05);"
  *ngIf="viewState$ | async as state">
  <!-- Toolbar Section -->
  <app-file-view-toolbar></app-file-view-toolbar>

  <div class="flex flex-1 overflow-hidden">
    <!-- Main Content Area -->
    <main class="flex-1 overflow-auto relative">
      <ng-container [ngSwitch]="state.viewMode">
        <!-- Icon Views (Extra Large, Large, Medium, Small) -->
        <app-file-grid *ngSwitchCase="'extra-large'" [files]="files" [viewMode]="'extra-large'"
          [activeFile]="selectedFile" (fileSelected)="onFileSelected($event)" (fileOpened)="onFileOpened($event)"
          (fileRenamed)="onFileRenamed($event)" (filePreviewed)="onFilePreviewed($event)"
          (fileDownloaded)="onFileDownloaded($event)" (fileDeleted)="onFileDeleted($event)"
          (bulkCopy)="onBulkCopy($event)" (bulkDownload)="onBulkDownload($event)" (bulkDelete)="onBulkDelete($event)"
          (bulkMove)="onBulkMove($event)">
        </app-file-grid>

        <app-file-grid *ngSwitchCase="'large'" [files]="files" [viewMode]="'large'" [activeFile]="selectedFile"
          (fileSelected)="onFileSelected($event)" (fileOpened)="onFileOpened($event)"
          (fileRenamed)="onFileRenamed($event)" (filePreviewed)="onFilePreviewed($event)"
          (fileDownloaded)="onFileDownloaded($event)" (fileDeleted)="onFileDeleted($event)"
          (bulkCopy)="onBulkCopy($event)" (bulkDownload)="onBulkDownload($event)" (bulkDelete)="onBulkDelete($event)"
          (bulkMove)="onBulkMove($event)">
        </app-file-grid>

        <app-file-grid *ngSwitchCase="'medium'" [files]="files" [viewMode]="'medium'" [activeFile]="selectedFile"
          (fileSelected)="onFileSelected($event)" (fileOpened)="onFileOpened($event)"
          (fileRenamed)="onFileRenamed($event)" (filePreviewed)="onFilePreviewed($event)"
          (fileDownloaded)="onFileDownloaded($event)" (fileDeleted)="onFileDeleted($event)"
          (bulkCopy)="onBulkCopy($event)" (bulkDownload)="onBulkDownload($event)" (bulkDelete)="onBulkDelete($event)"
          (bulkMove)="onBulkMove($event)">
        </app-file-grid>

        <app-file-grid *ngSwitchCase="'small'" [files]="files" [viewMode]="'small'" [activeFile]="selectedFile"
          (fileSelected)="onFileSelected($event)" (fileOpened)="onFileOpened($event)"
          (fileRenamed)="onFileRenamed($event)" (filePreviewed)="onFilePreviewed($event)"
          (fileDownloaded)="onFileDownloaded($event)" (fileDeleted)="onFileDeleted($event)"
          (bulkCopy)="onBulkCopy($event)" (bulkDownload)="onBulkDownload($event)" (bulkDelete)="onBulkDelete($event)"
          (bulkMove)="onBulkMove($event)">
        </app-file-grid>

        <!-- List View -->
        <app-file-list *ngSwitchCase="'list'" [files]="files" (fileSelected)="onFileSelected($event)"
          (fileOpened)="onFileOpened($event)">
        </app-file-list>

        <!-- Details View -->
        <app-file-details *ngSwitchCase="'details'" [files]="files" (fileSelected)="onFileSelected($event)"
          (fileOpened)="onFileOpened($event)">
        </app-file-details>

        <!-- Tiles View -->
        <app-file-grid *ngSwitchCase="'tiles'" [files]="files" [viewMode]="'medium'" [activeFile]="selectedFile"
          (fileSelected)="onFileSelected($event)" (fileOpened)="onFileOpened($event)"
          (fileRenamed)="onFileRenamed($event)" (filePreviewed)="onFilePreviewed($event)"
          (fileDownloaded)="onFileDownloaded($event)" (fileDeleted)="onFileDeleted($event)"
          (bulkCopy)="onBulkCopy($event)" (bulkDownload)="onBulkDownload($event)" (bulkDelete)="onBulkDelete($event)"
          (bulkMove)="onBulkMove($event)">
        </app-file-grid>

        <!-- Content View -->
        <app-file-grid *ngSwitchCase="'content'" [files]="files" [viewMode]="'large'" [activeFile]="selectedFile"
          (fileSelected)="onFileSelected($event)" (fileOpened)="onFileOpened($event)"
          (fileRenamed)="onFileRenamed($event)" (filePreviewed)="onFilePreviewed($event)"
          (fileDownloaded)="onFileDownloaded($event)" (fileDeleted)="onFileDeleted($event)"
          (bulkCopy)="onBulkCopy($event)" (bulkDownload)="onBulkDownload($event)" (bulkDelete)="onBulkDelete($event)"
          (bulkMove)="onBulkMove($event)">
        </app-file-grid>

        <div *ngSwitchDefault class="p-16 text-center text-slate-400 flex flex-col items-center justify-center gap-3">
          <div class="w-16 h-16 bg-slate-50 dark:bg-slate-800 rounded-full flex items-center justify-center">
            <mat-icon style="font-size: 32px; width: 32px; height: 32px; color: #cbd5e1;">folder_open</mat-icon>
          </div>
          <p class="text-sm font-semibold">This view is coming soon</p>
        </div>
      </ng-container>
    </main>

    <!-- Side Panes -->
    <aside *ngIf="state.showDetails" class="animate-slide-in-right border-l border-slate-200 dark:border-slate-700/50">
      <app-details-pane [selectedFile]="selectedFile"></app-details-pane>
    </aside>

    <aside *ngIf="(viewState$ | async)?.showPreview"
      class="animate-slide-in-right border-l border-slate-200 dark:border-slate-700/50">
      <app-preview-pane [selectedFile]="selectedFile"></app-preview-pane>
    </aside>
  </div>

  <!-- Status Bar -->
  <footer
    class="h-9 bg-[#f8fafc] dark:bg-[#0f172a] border-t border-slate-200 dark:border-slate-700/50 px-5 flex items-center justify-between text-[11px] text-slate-500 dark:text-slate-400 font-medium">
    <div class="flex items-center gap-4">
      <span>{{ files.length }} items</span>
      <span *ngIf="selectedFile" class="text-slate-700 dark:text-slate-200 font-semibold">{{ selectedFile.name }}</span>
    </div>
    <div class="flex items-center gap-2">
      <button (click)="viewService.updateViewMode('details')"
        class="w-6 h-6 flex items-center justify-center rounded text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700 transition-colors"
        aria-label="List view">
        <mat-icon style="font-size: 14px; width: 14px; height: 14px;">view_headline</mat-icon>
      </button>
      <button (click)="viewService.updateViewMode('large')"
        class="w-6 h-6 flex items-center justify-center rounded text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700 transition-colors"
        aria-label="Grid view">
        <mat-icon style="font-size: 14px; width: 14px; height: 14px;">grid_view</mat-icon>
      </button>
    </div>
  </footer>
</div>